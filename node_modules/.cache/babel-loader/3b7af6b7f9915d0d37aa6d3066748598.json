{"ast":null,"code":"import _slicedToArray from\"/home/wws/pro-organiser-application/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from\"react\";import style from\"./AddColumn.module.css\";import Modal from'./../../common/Modal/Modal';import Axios from\"axios\";import{AuthContext}from'../../context/Auth';function AddColumn(props){var _useContext=useContext(AuthContext),currentUser=_useContext.currentUser;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showModal=_useState2[0],setShowModal=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),columnName=_useState4[0],setColumnName=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),formComplete=_useState6[0],setFormComplete=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),formIncompleteError=_useState8[0],setFormIncompleteError=_useState8[1];var columnNames=React.useRef();var userId=currentUser.uid;useEffect(function(){modalOpenHandler();},[showModal]);var handleAddColumnClick=function handleAddColumnClick(event){if(columnNames.current.value.length===0){setFormComplete(false);setFormIncompleteError(true);}else{// add column name in firebase\nAxios.post(\"https://pro-organiser-app.firebaseio.com/\".concat(userId,\"/boardContents/\").concat(props.boardId,\"/column.json\"),{name:columnName}).then(function(response){alert(\"column added succesfully\");props.setShowColumn(true);}).catch(function(error){return console.log(error);});setShowModal(false);}};var modalOpenHandler=function modalOpenHandler(){var colBox=document.getElementById(\"addColumnBox\");colBox.addEventListener(\"click\",function(){setShowModal(true);});};var modalCloseHandler=function modalCloseHandler(){setShowModal(false);};var modalContent=showModal?/*#__PURE__*/React.createElement(React.Fragment,null,formIncompleteError?/*#__PURE__*/React.createElement(\"p\",{style:{color:'red'}},\"Kindly complete the form before adding Column\"):null,/*#__PURE__*/React.createElement(\"div\",{className:style.AddColumnForm},/*#__PURE__*/React.createElement(\"h2\",null,\"Add column\"),/*#__PURE__*/React.createElement(\"div\",{className:style.FormInput},/*#__PURE__*/React.createElement(\"span\",{className:style.Lable},\"Enter a column name:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"column_name\",value:columnName,placeholder:\"Enter a column name\",ref:columnNames,onChange:function onChange(event){return setColumnName(event.target.value);}}))),/*#__PURE__*/React.createElement(\"button\",{className:style.AddButton,id:\"CreateColumn\",disabled:formComplete,onClick:handleAddColumnClick},\"Add Column\")):null;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:style.addColumnBox,id:\"addColumnBox\"},/*#__PURE__*/React.createElement(\"div\",null,\"Add a column\")),/*#__PURE__*/React.createElement(\"br\",null),showModal&&/*#__PURE__*/React.createElement(Modal,{content:modalContent,close:modalCloseHandler}));}export default AddColumn;","map":{"version":3,"sources":["/home/wws/pro-organiser-application/src/components/addColumn/AddColumn.js"],"names":["React","useState","useEffect","useContext","style","Modal","Axios","AuthContext","AddColumn","props","currentUser","showModal","setShowModal","columnName","setColumnName","formComplete","setFormComplete","formIncompleteError","setFormIncompleteError","columnNames","useRef","userId","uid","modalOpenHandler","handleAddColumnClick","event","current","value","length","post","boardId","name","then","response","alert","setShowColumn","catch","error","console","log","colBox","document","getElementById","addEventListener","modalCloseHandler","modalContent","color","AddColumnForm","FormInput","Lable","target","AddButton","addColumnBox"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport style from \"./AddColumn.module.css\";\nimport Modal from './../../common/Modal/Modal';\nimport Axios from \"axios\";\nimport { AuthContext } from '../../context/Auth';\n\nfunction AddColumn(props) {\n  const { currentUser } = useContext(AuthContext);\n  \n  const [showModal, setShowModal] = useState(false);\n  const [columnName, setColumnName] = useState(\"\");\n  const [formComplete, setFormComplete] = useState(false);\n  const [formIncompleteError, setFormIncompleteError] = useState(false);\n\n  const columnNames  = React.useRef();\n\n  const userId = currentUser.uid;\n\n  useEffect(() => {\n    modalOpenHandler();\n  }, [showModal]);\n\n  const handleAddColumnClick = (event) => {\n        if(columnNames.current.value.length === 0){\n          setFormComplete(false);\n          setFormIncompleteError(true);\n    } else {\n      // add column name in firebase\n      Axios.post(`https://pro-organiser-app.firebaseio.com/${userId}/boardContents/${props.boardId}/column.json`, {\n        name: columnName,\n      })\n        .then((response) => {\n          alert(\"column added succesfully\");\n          props.setShowColumn(true);\n        })\n        .catch((error) => console.log(error));\n\n      setShowModal(false);\n    }\n  };\n\n  const modalOpenHandler = () => {\n    let colBox = document.getElementById(\"addColumnBox\");\n    colBox.addEventListener(\"click\", () => {\n      setShowModal(true);\n    });\n  };\n\n  const  modalCloseHandler = () => {setShowModal(false)};\n\n  let modalContent = showModal ? \n\n  (\n      <>\n      {formIncompleteError ? <p style={{color : 'red'}}>Kindly complete the form before adding Column</p> : null}\n      <div className={style.AddColumnForm}>\n        <h2>Add column</h2>\n       <div className={style.FormInput}><span className={style.Lable}>Enter a column name:</span><input type=\"text\" id=\"column_name\" value={columnName} placeholder=\"Enter a column name\" ref={columnNames} onChange={(event) => setColumnName(event.target.value)}/></div>\n      </div>\n      <button className={style.AddButton} id=\"CreateColumn\" disabled={formComplete} onClick={handleAddColumnClick}>Add Column</button>\n      </>\n  )\n  :null;\n\n  return (\n    <div>\n       <div className={style.addColumnBox} id=\"addColumnBox\">\n        <div>Add a column</div>\n      </div>\n        <br />\n        {showModal && (\n        \n            <Modal  \n                content = {modalContent}\n                close = {modalCloseHandler}/> \n        )}\n       \n    </div>\n)\n}\n\nexport default AddColumn;\n"]},"metadata":{},"sourceType":"module"}